<div class="profile-container">
  <h1 class="page-title">Change Password</h1>

  <div class="profile-card">
    <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
      <div class="form-grid">
        <div class="form-group">
          <label for="currentPassword">Current Password</label>
          <input
            id="currentPassword"
            type="password"
            formControlName="currentPassword"
            [class.invalid]="f['currentPassword'].touched && f['currentPassword'].invalid"
          />
          @if (f['currentPassword'].touched && f['currentPassword'].invalid) {
            <small class="error">Current password is required.</small>
          }
        </div>

        <div class="form-group">
          <label for="newPassword">New Password</label>
          <input
            id="newPassword"
            type="password"
            formControlName="newPassword"
            [class.invalid]="f['newPassword'].touched && f['newPassword'].invalid"
          />
          @if (f['newPassword'].touched && f['newPassword'].hasError('required')) {
            <small class="error">New password is required.</small>
          }
          @if (f['newPassword'].touched && f['newPassword'].hasError('minlength')) {
            <small class="error">Must be at least 6 characters.</small>
          }
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            [class.invalid]="f['confirmPassword'].touched && f['confirmPassword'].invalid"
          />
          @if (f['confirmPassword'].touched && f['confirmPassword'].invalid) {
            <small class="error">Please confirm your password.</small>
          }
        </div>
      </div>

      <div class="form-footer">
        <button type="submit" class="save-btn" [disabled]="isSubmitting">
          {{ isSubmitting ? 'Saving...' : 'Save Changes' }}
        </button>
      </div>

      @if (successMessage) {
        <div class="alert success">{{ successMessage }}</div>
      }
      @if (errorMessage) {
        <div class="alert error">{{ errorMessage }}</div>
      }
    </form>
  </div>
</div>
