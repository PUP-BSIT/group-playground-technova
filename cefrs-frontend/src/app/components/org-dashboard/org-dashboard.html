<div class="dashboard-container">
  <!-- Sidebar Component -->
  <app-org-sidebar 
    [currentView]="currentView" 
    (viewChanged)="onSidebarViewChange($event)">
  </app-org-sidebar>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Dashboard View -->
    @if (currentView === 'dashboard') {
      <div class="page-header"><h1>Dashboard</h1></div>
      @if (user) {
        <div class="welcome-banner">
          <h2>Welcome back, {{ user.organizationName || (user.firstName + ' ' + user.lastName) || 'Organization' }}!</h2>
          <p>Track your reservations and equipment requests here</p>
        </div>
      } @else {
        <div class="welcome-banner skeleton-loading"><h2>Welcome back, Loading...</h2></div>
      }

      <div class="stats-grid">
        <div class="stat-card"><div class="stat-label">Active Reservations</div><div class="stat-value">{{ stats.activeReservations }}</div></div>
        <div class="stat-card"><div class="stat-label">Borrowed Equipment</div><div class="stat-value">{{ stats.borrowedEquipment }}</div></div>
        <div class="stat-card"><div class="stat-label">Pending Requests</div><div class="stat-value">{{ stats.pendingRequests }}</div></div>
        <div class="stat-card"><div class="stat-label">Total Requests</div><div class="stat-value">{{ stats.totalRequests }}</div></div>
      </div>

      <div class="recent-section">
        <div class="section-header">
          <h3>My Recent Requests</h3>
          <button class="see-all-btn" (click)="setView('requests')">See All</button>
        </div>

        <div class="requests-list">
          @for (request of recentRequests; track request.id) {
            <div class="request-item">
              <div class="request-info">
                <div class="request-title">{{ request.title }}</div>
                <div class="request-meta">{{ request.type }} â€¢ {{ request.requestDate }}</div>
              </div>
              <span class="status-badge" [ngClass]="getStatusClass(request.status)">{{ request.status }}</span>
            </div>
          } @empty {
            <div class="no-data-message">No recent requests found.</div>
          }
        </div>
      </div>
    }

    <!-- Facilities View -->
    @if (currentView === 'facilities') {
      <app-org-facilities></app-org-facilities>
    }

    <!-- Equipment View -->
    @if (currentView === 'equipment') {
      <app-org-equipment></app-org-equipment>
    }

    <!-- My Requests View -->
    @if (currentView === 'requests') {
      <app-org-my-request></app-org-my-request>
    }

    <!-- Transactions View -->
    @if (currentView === 'transactions') {
      <app-org-my-transaction></app-org-my-transaction>
    }
  </main>
</div>